---
title: 第一章 MySQL架构与历史
date: 2017-02-21 19:20:43
tags:
---

MySQL的特性是它的`存储引擎架构`。

这种设计将查询处理(`Query Processing`)及其他系统任务(`Server Task`) 和`数据的存储/提取`相分离。

在使用时根据具体情况选择存储引擎。

## MySQL逻辑架构

![MySQL服务器逻辑架构图](http://img.dnbcw.info/2012316/3881291.png)

由上图可以主要分为三层：

第一层架构 主要功能：连接处理，授权认证，安全等。

第二层架构 大多数MySQL的核心服务都在这一层：查询解析、分析、优化、缓存以及所有的内置函数(eg: 日期、时间、数学、加密等函数)，所有跨存储引擎的功能都在这一层实现：存储过程、触发器、视图等。

第三层架构 包含了存储引擎 负责MySQL中数据的存储和提取。 服务器通过API与存储引擎进行通信，API屏蔽了不同引擎之间的差异。

### 连接管理与安全性

每个客户端连接都会在服务器进程中拥有一个线程，这个连接的查询只会在这个单独的线程中执行。

服务器会缓存线程或者使用线程池技术，不需要为每个连接创建一个线程，因而使用较少的线程来服务大量的连接。

当客户连接服务器的时候，服务器会对其进行认证，基于用户名、密码、主机信息。

客户连接上服务器，执行某个操作时，服务器会对其进行权限判断，判断该用户是否有权限进行该项操作。

### 优化与执行

MySQL会解析查询,并创建解析树，然后对其进行各种优化，包括重写查询、决定表的读取顺序，以及选取合适的索引等。

用户可以使用特殊的关键字提示(`hint`)优化器，影响其决策过程。

也可以请求优化器解释(`explain`)优化过程，让客户知道服务器如何进行优化。

以便用户修改查询和schema、修改相关配置，使之高效运行。

优化器并不关心表使用的是什么存储引擎，但存储引擎对于优化查询是有影响的。

对于SELECT语句，在解析查询之前，服务器会先检查查询缓存(`Query Cache`),如果能找到对应的查询，服务器就会直接返回查询缓存中的结果集。

---

## 并发控制

---

## 事务

---

## 多版本并发控制

---

## Mysql的存储引擎

---

## Mysql时间线

---

## Mysql的开发模式

--- 